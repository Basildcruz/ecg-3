<html>
    <head>
        <link rel="stylesheet" href="index.css" />
        <script type="text/javascript" src="../lib/require.js"></script>
        <script type="text/javascript">
            requirejs.config({
                baseUrl : './'
            });

            require(['Electrocardiogram'], function(Electrocardiogram) {
                var ecg = new Electrocardiogram(
                        document.body.offsetWidth,
                        document.body.offsetHeight);

                require(['text!../resource/ecg.json'], function(json) {
                    var n = Math.round(ecg.getWidth() / Electrocardiogram.CELL_SIZE);

                    try {
                        var data = JSON.parse(json);
                        var timer = window.setInterval(function() {
                            if (data.length) {
                                ecg.drawCurve(data.slice(0, n));
                                data.shift();
                            } else {
                                window.clearInterval(timer);
                            }
                        }, 500);
                    } catch (e) {
                        console.error(e.stack);
                    }
                });
            });
        </script>
    </head>
    <body>
    </body>
</html>
